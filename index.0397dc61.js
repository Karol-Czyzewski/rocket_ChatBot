const t=(t,e,s)=>{const a=document.createElement(t);return a.textContent=s||"",a.classList.add(e),a},e=new RegExp(/(@[a-z])\w+/,"g"),s=[{question:"name of company",anwser:"SpaceX"},{question:"founder",anwser:"Elon Musk"},{question:"website",anwser:"https://www.spacex.com/"},{question:"employees",anwser:"8000 people"},{question:"headquarters",anwser:"city: Hawthorne, state: California"}];class a{constructor(e,s){this.chatbotStorage=e,this.chatbotController=s,this.chatbotOpenButton=t("button","chatbotOpenButton"),this.chatbotCloseButton=t("button","chatbotCloseButton"),this.chatbotContainer=t("div","chatbotContainer"),this.messageContainer=t("div","msgArea")}createChatbot(){this.renderBotHeading(),this.renderMessageArea(),this.createInputField(),this.chatbotOpenButton.addEventListener("click",(()=>this.chatbotContainer.classList.add("open"))),this.chatbotCloseButton.addEventListener("click",(()=>this.chatbotContainer.classList.remove("open")));const t=(t=>{const e=document.querySelector(t);if(null===e)throw new Error(`${t} HTML element dosent exist`);return e})("body");t.appendChild(this.chatbotOpenButton),t.appendChild(this.chatbotContainer)}renderMessageArea(){this.chatbotContainer.appendChild(this.messageContainer)}renderBotHeading(){const e=t("div","headingOfBot"),s=t("div","welcomeHeader","rocket_Bot");e.appendChild(s),e.appendChild(this.chatbotCloseButton),this.chatbotContainer.appendChild(e)}createInputField(){const e=t("div","formContainer");this.chatbotContainer.appendChild(e);const s=t("form","form");e.appendChild(s);const a=t("label","label");s.appendChild(a);const n=t("input","input"),o=t("input","input");o.type="submit",o.value="";const i=t("div","buttons-container");e.appendChild(i);const r=t("button","cta-form","Clear");r.addEventListener("click",(()=>{this.chatbotStorage.removeMessagesFromStorage(),this.messageContainer.textContent="",this.createGreetings()}));const c=t("button","cta-form","Info launch");c.addEventListener("click",(()=>this.createMessage("List of commands:\n            1. @next - next launch\n            2. @latest - latest launch","bot"))),i.appendChild(r),i.appendChild(c),a.appendChild(n),s.appendChild(o),s.addEventListener("submit",(t=>this.logSubmit(t,n)))}logSubmit(t,e){if(t.preventDefault(),""===e.value)return;this.createMessage(e.value,"user");const s=e.value;this.chatbotController.runCommand(s),e.value=""}createGreetings(){this.createMessage("Helllo in rocket_Bot! There are some info about SpaceX Corporation.","bot-welcome");const e=t("ul","list");this.messageContainer.appendChild(e),s.forEach((s=>{const a=t("li","list-element",s.question);e.appendChild(a),a.addEventListener("click",(()=>this.createMessage(s.anwser,"bot")))}))}createMessage(t,e){this.renderMessage(t,e),this.chatbotStorage.setMessageInStorage(t,e)}renderMessage(e,s){const a=t("div","message",e);a.classList.add(`message--${s}`),this.messageContainer.appendChild(a)}}class n{constructor(t){this.messagesList=t}setMessageInStorage(t,e){this.messagesList.push({value:t,type:e}),localStorage.setItem("messages",JSON.stringify(this.messagesList))}removeMessagesFromStorage(){this.messagesList.splice(0),localStorage.removeItem("messages")}}class o{async getSpaceXData(t){try{const e=await fetch(`https://api.spacexdata.com/v4/launches/${t}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(t){throw t}}}class i{constructor(t){this.chatbotStorage=new n(t),this.chatbotRender=new a(this.chatbotStorage,this),this.chatbotApi=new o,this.messagesList=t,this.init()}init(){this.chatbotRender.createChatbot(),this.getMessageFromStorage(),this.chatbotRender.createGreetings()}getMessageFromStorage(){this.messagesList.forEach((t=>this.chatbotRender.renderMessage(t.value,t.type)))}runCommand(t){if(e.test(t))switch(this.chatbotRender.createMessage("Loading data...","bot"),t){case"@next":this.renderSpaceXData("next");break;case"@latest":this.renderSpaceXData("latest");break;default:this.chatbotRender.createMessage("Uncorrect command, please check -> Info launch","bot")}}async renderSpaceXData(t){const e=await this.chatbotApi.getSpaceXData(t);this.chatbotRender.createMessage(`${t} rocket launch:\n        rocket name: ${e.name}\n        launch date: ${e.date_utc}`,"bot")}}new class{constructor(){const t=localStorage.getItem("messages");this.messagesList=null===t?[]:JSON.parse(t),this.chatbotController=new i(this.messagesList)}};
//# sourceMappingURL=index.0397dc61.js.map
